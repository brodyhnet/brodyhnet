
function FindProxyForURL(url, host) {
  // Variables defined to proxy or send direct
  var proxy = 'PROXY relay.lsaccess.me:62312';
  var direct = 'DIRECT';
  // Internal IP Ranges
  if (
    isInNet(host, "127.0.0.0", "255.0.0.0") ||
    isInNet(host, "10.0.0.0", "255.0.0.0") ||
    isInNet(host, "172.16.0.0", "255.240.0.0") ||
    isInNet(host, "192.168.0.0", "255.255.0.0") ||
    isInNet(host, "169.254.0.0", "255.255.0.0")
  ) {
    return direct;
  }
  // Send Plain Hostnames DIRECT
  if (isPlainHostName(host))
    return "DIRECT";
  // Send FTP traffic DIRECT
  if (url.substring(0, 4) === 'ftp:') {
    return direct;
  }
  // Entries to cover subdomains
  var no_proxy_subs = Array(
	".windowsupdate.com",
	".microsoftonline.com",
	".microsoftonline-p.net",
	".microsoftonline.net",
	".officeapps.live.com",
	".outlook.com",
	".microsoft.com",
	".edgesuite.net",
	".office.net",
	".live.com",
	".k12.sd.us",
	".sd.gov",
	".mail.sd.gov",
	".sdsos.gov",
	".sas.sui.online.com",
	".apps.sd.gov",
	".microsoftonline-p.com",
	".office365.com",
	".update.microsoft.com",
	".msauth.net",
	".outlook.office365.com",
	".wl.sui-online.com",
	".sui-online.com",
	".ssl.gstatic.com",
	".google-analytics.com",
	".googleusercontent.com",
	".gstatic.com",
	".infinitecampus.com",
	".googledrive.com",
	".gweb-gettingstartedguide.appspot.com",
	".omahaproxy.appspot.com",
	".hitt.lwtears.com",
	".respondus.com",
	".googleapis.com",
	".s.w.org",
	".schoology.com",
	".Amazonaws.com",
	".sdmylife.com",
	".sis2.ddncampus.net",
	".seesaw.me",
	".renlearn.com",
	".appsync-api.us-east-1.amazonaws.com",
	".iot.us-east-1.amazonaws.com",
	".appsync-api.us-west-2.amazonaws.com",
	".iot.us-west-2.amazonaws.com",
	".renlearnrp.com",
	".ajax.googleapis.com",
	".ajax.aspnetcdn.com",
	".pendo.io",
	".cdnjs.cloudflare.com",
	".fonts.googleapis.com",
	".global-zone51.renaissance-go.com",
	".accounts.google.com",
	".respondus2.com",
	".southeasttech.campusconcourse.com",
	".lti.next.ecollege.com",
	".savvasrealize.com",
	".sd.tds.airast.org",
	".airast.org",
	".sd.tds.cambiumast.com",
	".rightoncueservices.com",
	".login.k12.sd.us",
	".msedge.net",
	".live.net",
	".kidtimestorytime.com",
	".msftauth.net",
	".intercom.io",
	".pinterest.com",
	".v2.4honline.com",
	".app.joinhandshake.com",
	".lti.act-et.org",
	".practice.actdigitalservices.org",
	".my.act.org",
	".streamablelearning.com",
	".mytech.mitchelltech.edu",
	".cubnation.schoology.com",
	".chamberlain.k12.sd.us",
	".sharpschool.com",
	".cubs.org",
	".jquery.com",
	".ddncampus.net",
	".wolakotaproject.org",
	".testadministration.org",
	".act-prod.taocloud.org",
	".testregistration.org",
	".vtc.act.org",
	".rsp.act.org",
	".workkeys-assets.actdigitalservice.org",
	".actdigitalservices.org",
	".172.24.24.37",
	".206.176.66.2",
	".10.212.134.200",
	".10.212.134.201",
	".10.212.134.202",
	".gimkitconnect.com",
	".login10.cloud1.tds.cambiumast.com",
	".tds.cambiumast.com",
	".netflix.com",
	".production-categorizations-device-api.lsfilter.com",
	".analytics-device-api.lightspeedsystems.com",
	".172.24.24.45",
	".respondus4.com",
	".respondus3.com",
	".cloudfront.net",
	".eum-appdynamics.com",
	".commportal.midstatesd.net",
	".sip.midstatesd.net",
	".66.231.25.194",
	".66.231.25.46",
	".172.24.24.230",
	".gettysburg.edu",
	".classroom.google.com",
	".zoom.us",
	".webex.com",
	".ocsp.apple.com",
	".renaissance-go.com",
	".collegeboard.org",
	".cricut.com",
	".r4.res.office365.com",
	".renaissance.com",
	".testnav.com",
	".zoom.com",
	".pearsontestcontent.com",
	".meetzoom.net",
	".tylertech.com",
	".drcedirect.com",
	".pearson.com",
	".starttest.com",
	".kiteaai.org",
	".khanacademy.org",
	".infinitecampus.org",
	".comodoca.com",
	".support.hp.com",
	".gimkit.com",
	".youtube-nocookie.com",
	".makerbot.com",
	".logmeinrescue.com",
	".drc-centraloffice.com",
	".edpuzzle.com",
	".logmein.com",
	".savvas.com",
	".canva.com",
	".lsrelay-reports-production.s3-us-west-2.amazonaws.com",
	".pearsonvue.com",
	".sophos.com",
	".unsplash.com",
	".donjohnston.net",
	".logmein123.com",
	".userback.io",
	".ebooks.cenreader.com",
	".cengage.com",
	".hapicen.com",
	".cenreader.com",
	".fulltimefilmmaker.com",
	".harappa.com",
	".reach.usiouxfalls.edu",
	".act.org",
	".thawte.com",
	".usertrust.com",
	".emq.sotertechnologies.com",
	".ota.sotertechnologies.com",
	".52.205.74.114",
	".52.91.225.2",
	".54.196.17.213",
	".54.156.64.229",
	".alerts.sotertechnologies.com",
	".172.24.27.195",
	".max.com",
	".eca-test-init-wida.te.drcedirect.com",
	".eca-test-engine-auth-service-wida.te.drcedirect.com",
	".insight-services-wida.drcedirect.com",
	".frontlineeducation.com",
	".iepdirect.com",
	".sis1.ddncampus.net",
	".sis3.ddncampus.net",
	".sis4.ddncampus.net",
	".savvaseasybridge.com",
	".d2l.sdbor.edu",
	".wellsfargo.com",
	".openai.com",
	".cep.dpac.mil",
	".sd.portal.cambiumast.com",
	".sso1.cambiumast.com",
	".sd.reporting.cambiumast.com",
	".cambiumtds.com",
	".tds.cambiumtds.com",
	".cambiumast.com",
	".cdn.cambiumtds.com",
	".cdn2.cambiumtds.com",
	".static.cambiumtds.com",
	".resources.cambiumtds.com",
	".ezcardinfo.com",
	".ezbusinesscardmanagement.com",
	".naepnpd.org",
	".api.enaep.prod24.naepnpd.org",
	".enaep.prod24.naepnpd.org",
	".speedtestcustom.com",
	".c.speedtestcustom.com",
	".speedtest-ng.naepnpd.org.prod.hosts.ooklaserver.net",
	".slack-msgs.com:443",
	".microsoft.com",
	".msftconnecttest.com",
	".apple.com",
	".ably.io",
	".twilio.com",
	".icloud.com",
	".lsmdm.com",
	".turn.anyfirewall.com",
	".q73sd1i7s5.execute-api.us-west-2.amazonaws.com",
	".d5h6hjc5h3.execute-api.us-west-1.amazonaws.com",
	".p7nvu5it0k.execute-api.us-west-2.amazonaws.com",
	".lsrelay-extensions-production.s3.amazonaws.com",
	".oscp.apple.com",
	".mzstatic.com",
	".digicert.com",
	".lsmdm.com",
	".lsfilter.com",
	".relay.school",
	".lightspeedsystems.com",
	".lightspeedsystems.app",
	".stagingls.io",
	".developmentls.io"
  );
  // Entries to cover exact match domains
  var no_proxy_exact = Array(
	"windowsupdate.com",
	"microsoftonline.com",
	"microsoftonline-p.net",
	"microsoftonline.net",
	"officeapps.live.com",
	"outlook.com",
	"microsoft.com",
	"edgesuite.net",
	"office.net",
	"live.com",
	"k12.sd.us",
	"sd.gov",
	"mail.sd.gov",
	"sdsos.gov",
	"sas.sui.online.com",
	"apps.sd.gov",
	"microsoftonline-p.com",
	"office365.com",
	"update.microsoft.com",
	"msauth.net",
	"outlook.office365.com",
	"wl.sui-online.com",
	"sui-online.com",
	"ssl.gstatic.com",
	"google-analytics.com",
	"googleusercontent.com",
	"gstatic.com",
	"infinitecampus.com",
	"googledrive.com",
	"gweb-gettingstartedguide.appspot.com",
	"omahaproxy.appspot.com",
	"hitt.lwtears.com",
	"respondus.com",
	"googleapis.com",
	"s.w.org",
	"schoology.com",
	"Amazonaws.com",
	"sdmylife.com",
	"sis2.ddncampus.net",
	"seesaw.me",
	"renlearn.com",
	"appsync-api.us-east-1.amazonaws.com",
	"iot.us-east-1.amazonaws.com",
	"appsync-api.us-west-2.amazonaws.com",
	"iot.us-west-2.amazonaws.com",
	"renlearnrp.com",
	"ajax.googleapis.com",
	"ajax.aspnetcdn.com",
	"pendo.io",
	"cdnjs.cloudflare.com",
	"fonts.googleapis.com",
	"global-zone51.renaissance-go.com",
	"accounts.google.com",
	"respondus2.com",
	"southeasttech.campusconcourse.com",
	"lti.next.ecollege.com",
	"savvasrealize.com",
	"sd.tds.airast.org",
	"airast.org",
	"sd.tds.cambiumast.com",
	"rightoncueservices.com",
	"login.k12.sd.us",
	"msedge.net",
	"live.net",
	"kidtimestorytime.com",
	"msftauth.net",
	"intercom.io",
	"pinterest.com",
	"v2.4honline.com",
	"app.joinhandshake.com",
	"lti.act-et.org",
	"practice.actdigitalservices.org",
	"my.act.org",
	"streamablelearning.com",
	"mytech.mitchelltech.edu",
	"cubnation.schoology.com",
	"chamberlain.k12.sd.us",
	"sharpschool.com",
	"cubs.org",
	"jquery.com",
	"ddncampus.net",
	"wolakotaproject.org",
	"testadministration.org",
	"act-prod.taocloud.org",
	"testregistration.org",
	"vtc.act.org",
	"rsp.act.org",
	"workkeys-assets.actdigitalservice.org",
	"actdigitalservices.org",
	"172.24.24.37",
	"206.176.66.2",
	"10.212.134.200",
	"10.212.134.201",
	"10.212.134.202",
	"gimkitconnect.com",
	"login10.cloud1.tds.cambiumast.com",
	"tds.cambiumast.com",
	"netflix.com",
	"production-categorizations-device-api.lsfilter.com",
	"analytics-device-api.lightspeedsystems.com",
	"172.24.24.45",
	"respondus4.com",
	"respondus3.com",
	"cloudfront.net",
	"eum-appdynamics.com",
	"commportal.midstatesd.net",
	"sip.midstatesd.net",
	"66.231.25.194",
	"66.231.25.46",
	"172.24.24.230",
	"gettysburg.edu",
	"classroom.google.com",
	"zoom.us",
	"webex.com",
	"ocsp.apple.com",
	"renaissance-go.com",
	"collegeboard.org",
	"cricut.com",
	"r4.res.office365.com",
	"renaissance.com",
	"testnav.com",
	"zoom.com",
	"pearsontestcontent.com",
	"meetzoom.net",
	"tylertech.com",
	"drcedirect.com",
	"pearson.com",
	"starttest.com",
	"kiteaai.org",
	"khanacademy.org",
	"infinitecampus.org",
	"comodoca.com",
	"support.hp.com",
	"gimkit.com",
	"youtube-nocookie.com",
	"makerbot.com",
	"logmeinrescue.com",
	"drc-centraloffice.com",
	"edpuzzle.com",
	"logmein.com",
	"savvas.com",
	"canva.com",
	"lsrelay-reports-production.s3-us-west-2.amazonaws.com",
	"pearsonvue.com",
	"sophos.com",
	"unsplash.com",
	"donjohnston.net",
	"logmein123.com",
	"userback.io",
	"ebooks.cenreader.com",
	"cengage.com",
	"hapicen.com",
	"cenreader.com",
	"fulltimefilmmaker.com",
	"harappa.com",
	"reach.usiouxfalls.edu",
	"act.org",
	"thawte.com",
	"usertrust.com",
	"emq.sotertechnologies.com",
	"ota.sotertechnologies.com",
	"52.205.74.114",
	"52.91.225.2",
	"54.196.17.213",
	"54.156.64.229",
	"alerts.sotertechnologies.com",
	"172.24.27.195",
	"max.com",
	"eca-test-init-wida.te.drcedirect.com",
	"eca-test-engine-auth-service-wida.te.drcedirect.com",
	"insight-services-wida.drcedirect.com",
	"frontlineeducation.com",
	"iepdirect.com",
	"sis1.ddncampus.net",
	"sis3.ddncampus.net",
	"sis4.ddncampus.net",
	"savvaseasybridge.com",
	"d2l.sdbor.edu",
	"wellsfargo.com",
	"openai.com",
	"cep.dpac.mil",
	"sd.portal.cambiumast.com",
	"sso1.cambiumast.com",
	"sd.reporting.cambiumast.com",
	"cambiumtds.com",
	"tds.cambiumtds.com",
	"cambiumast.com",
	"cdn.cambiumtds.com",
	"cdn2.cambiumtds.com",
	"static.cambiumtds.com",
	"resources.cambiumtds.com",
	"ezcardinfo.com",
	"ezbusinesscardmanagement.com",
	"naepnpd.org",
	"api.enaep.prod24.naepnpd.org",
	"enaep.prod24.naepnpd.org",
	"speedtestcustom.com",
	"c.speedtestcustom.com",
	"speedtest-ng.naepnpd.org.prod.hosts.ooklaserver.net",
	"slack-msgs.com:443",
	"microsoft.com",
	"msftconnecttest.com",
	"apple.com",
	"ably.io",
	"twilio.com",
	"icloud.com",
	"lsmdm.com",
	"turn.anyfirewall.com",
	"q73sd1i7s5.execute-api.us-west-2.amazonaws.com",
	"d5h6hjc5h3.execute-api.us-west-1.amazonaws.com",
	"p7nvu5it0k.execute-api.us-west-2.amazonaws.com",
	"lsrelay-extensions-production.s3.amazonaws.com",
	"oscp.apple.com",
	"mzstatic.com",
	"digicert.com",
	"lsmdm.com",
	"lsfilter.com",
	"relay.school",
	"lightspeedsystems.com",
	"lightspeedsystems.app",
	"stagingls.io",
	"developmentls.io"
	"gangsterlifelover.com"
  );
  // Match the above lists to send direct
  for (var iter = 0; iter < no_proxy_subs.length; ++iter) {
    if (dnsDomainIs(host, no_proxy_subs[iter])) {
      return direct;
    }
  }
  for (var iter = 0; iter < no_proxy_exact.length; ++iter) {
    if (localHostOrDomainIs(host, no_proxy_exact[iter])) {
      return direct;
    }
  }
  // DEFAULT RULE: All other traffic sent to proxy.
  return proxy;
}
